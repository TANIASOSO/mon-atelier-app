<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Gestion Retouches</title>
    
    <!-- Framework de style de base -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    
    <!-- Icônes Font Awesome (pour les petites icônes comme les liens, etc.) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    
    <!-- Notre fichier de style personnalisé (doit être après Bulma) -->
</head>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
                <style>
    body {
        background-color: #f6f6ff; /* Couleur de fond si l'image tarde à charger */
        background-image: url("{{ url_for('static', filename='images/fond-theme-sombre.png') }}");
        background-repeat: no-repeat; /* On affiche l'image une seule fois */
        background-size: cover; /* L'image couvre toute la page, effet "zoom" adaptatif */
        background-position: center center; /* Centrage de l'image */
        background-attachment: fixed; /* Le fond reste fixe quand on défile */
    }

    /* On garde un fond blanc pour les boîtes de contenu pour la lisibilité */
    .box {
            background-color: white;
    }
                </style>
</head>
<body>
    
    <!-- Inclusion de la barre de navigation -->
    {% include 'navbar.html' %}
    
    <!-- Section pour afficher les messages "flash" -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="container" style="margin-top: 1rem; margin-bottom: -1rem;">
        {% for category, message in messages %}
          {# On s'assure que la catégorie est une classe Bulma valide #}
          {% set category_class = category if category in ['primary', 'link', 'info', 'success', 'warning', 'danger'] else 'info' %}
          <div class="notification is-{{ category_class }}">
            <button class="delete"></button>
            {{ message }}
          </div>
        {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    <!-- C'est ici que le contenu de vos autres pages (planning, etc.) sera injecté -->
    {% block content %}{% endblock %}

    <!-- Script pour le menu burger sur mobile -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
            if ($navbarBurgers.length > 0) {
                $navbarBurgers.forEach(el => {
                    el.addEventListener('click', () => {
                        const target = el.dataset.target;
                        const $target = document.getElementById(target);
                        el.classList.toggle('is-active');
                        $target.classList.toggle('is-active');
                    });
                });
            }

            // Script pour fermer les notifications "flash"
            document.querySelectorAll('.notification .delete').forEach( (deleteButton) => {
                const notification = deleteButton.parentNode;
                deleteButton.addEventListener('click', () => {
                    notification.parentNode.removeChild(notification);
                });
            });
        });
    </script>
        {% block scripts %}{% endblock %}
</body>
</html>